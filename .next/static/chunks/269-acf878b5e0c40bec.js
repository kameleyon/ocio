"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{5072:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(7437),o=r(2265),a=r(1396),s=r.n(a),i=r(8258),c=r(5754),l=r(5871),u=r(2455),d=r(7444),p=r(4322),h=r(5883),f=r(8004);function m(){let{signOut:e,profile:t}=(0,i.useAuth)(),[r,a]=o.useState(!1);return(0,n.jsx)("header",{className:"py-4 bg-richBlack/90 backdrop-blur-md border-b border-slateBlue/20 sticky top-0 z-50",children:(0,n.jsxs)(l.W,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(s(),{href:"/build",className:"flex items-center space-x-2",children:[(0,n.jsx)(u.Z,{className:"h-6 w-6 text-robinEggBlue"}),(0,n.jsx)("span",{className:"font-comfortaa font-bold text-xl text-whiteSmoke",children:"OptimusCode.io"})]}),(0,n.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,n.jsxs)(s(),{href:"/build",className:"text-lightGray hover:text-whiteSmoke transition flex items-center gap-1.5",children:[(0,n.jsx)(d.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Build"})]}),(0,n.jsxs)(s(),{href:"/projects",className:"text-lightGray hover:text-whiteSmoke transition flex items-center gap-1.5",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Projects"})]}),(0,n.jsx)("div",{className:"h-6 border-l border-slateBlue/30 mx-2"}),(0,n.jsxs)(c.z,{variant:"outline",className:"border-slateBlue/50 text-lightGray hover:text-whiteSmoke hover:border-slateBlue",onClick:()=>e(),children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-1.5"}),"Sign Out"]})]}),(0,n.jsx)("button",{className:"md:hidden text-lightGray",onClick:()=>a(!r),children:(0,n.jsx)(f.Z,{className:"h-6 w-6"})})]}),r&&(0,n.jsxs)("nav",{className:"md:hidden mt-4 pt-4 border-t border-slateBlue/20 flex flex-col space-y-2",children:[(0,n.jsxs)(s(),{href:"/build",className:"text-lightGray hover:text-whiteSmoke p-2 rounded-md flex items-center",onClick:()=>a(!1),children:[(0,n.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),(0,n.jsx)("span",{children:"Build"})]}),(0,n.jsxs)(s(),{href:"/projects",className:"text-lightGray hover:text-whiteSmoke p-2 rounded-md flex items-center",onClick:()=>a(!1),children:[(0,n.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),(0,n.jsx)("span",{children:"Projects"})]}),(0,n.jsxs)(c.z,{variant:"outline",className:"mt-2 border-slateBlue/50 text-lightGray hover:text-whiteSmoke hover:border-slateBlue w-full justify-start",onClick:()=>{e(),a(!1)},children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}},5754:function(e,t,r){r.d(t,{z:function(){return l}});var n=r(7437),o=r(2265),a=r(7256),s=r(6061),i=r(1657);let c=(0,s.j)("inline-flex items-center justify-center rounded-xl text-sm font-comfortaa font-bold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border-2 border-slateBlue text-whiteSmoke hover:bg-slateBlue hover:bg-opacity-20 hover:shadow-glow",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-slateBlue to-robinEggBlue text-whiteSmoke shadow-glow hover:shadow-lg hover:scale-105"},size:{default:"h-10 px-6 py-2",sm:"h-9 px-3",lg:"h-12 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=o.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:l=!1,...u}=e,d=l?a.g7:"button";return(0,n.jsx)(d,{className:(0,i.cn)(c({variant:o,size:s,className:r})),ref:t,...u})});l.displayName="Button"},7815:function(e,t,r){r.d(t,{Ol:function(){return i},Zb:function(){return s},aY:function(){return c},eW:function(){return l}});var n=r(7437),o=r(2265),a=r(1657);let s=o.forwardRef((e,t)=>{let{className:r,isGlass:o=!1,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border",o?"bg-berkeleyBlue/30 backdrop-blur-md border-slateBlue/20 shadow-md":"bg-card text-card-foreground",r),...s})});s.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-bold leading-none tracking-tight font-comfortaa",r),...o})}).displayName="CardTitle",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...o})}).displayName="CardDescription";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...o})});c.displayName="CardContent";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...o})});l.displayName="CardFooter"},5871:function(e,t,r){r.d(t,{W:function(){return s}});var n=r(7437),o=r(2265),a=r(1657);let s=o.forwardRef((e,t)=>{let{className:r,as:o="div",...s}=e;return(0,n.jsx)(o,{ref:t,className:(0,a.cn)("w-full mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl",r),...s})});s.displayName="Container"},5179:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(7437),o=r(2265),a=r(1657);let s=o.forwardRef((e,t)=>{let{className:r,containerClassName:o,type:s,...i}=e;return(0,n.jsx)("div",{className:o,children:(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-12 w-full rounded-xl border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slateBlue focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",r),ref:t,...i})})});s.displayName="Input"},8258:function(e,t,r){r.r(t),r.d(t,{AuthProvider:function(){return l},useAuth:function(){return u}});var n=r(7437),o=r(2265),a=r(4599),s=r(4033);async function i(e){try{let{data:t,error:r}=await a.O.from("profiles").select("*").eq("id",e).single();if(r)throw r;return t}catch(e){return console.error("Error in getProfile:",e),null}}let c=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[p,h]=(0,o.useState)(!0),f=(0,s.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await a.O.auth.getSession();if(null==e?void 0:e.user){l(e.user);let t=await i(e.user.id);d(t)}}catch(e){console.error("Error checking session:",e)}finally{h(!1)}})();let{data:e}=a.O.auth.onAuthStateChange(async(e,t)=>{(null==t?void 0:t.user)?(l(t.user),d(await i(t.user.id))):(l(null),d(null)),h(!1)});return()=>{e.subscription.unsubscribe()}},[]);let m=async(e,t)=>{try{let{data:r,error:n}=await a.O.auth.signInWithPassword({email:e,password:t});if(n)throw n;if(r.user){l(r.user);let e=await i(r.user.id);d(e),f.push("/build")}return{error:null}}catch(e){return console.error("Error signing in:",e),{error:e}}},g=async(e,t)=>{try{let{data:r,error:n}=await a.O.auth.signUp({email:e,password:t});if(n)throw n;return r.user&&(await a.O.from("profiles").insert({id:r.user.id,email:r.user.email||""}),f.push("/login?message=verification-email-sent")),{error:null}}catch(e){return console.error("Error signing up:",e),{error:e}}},w=async()=>{try{await a.O.auth.signOut(),f.push("/")}catch(e){console.error("Error signing out:",e)}},j=async()=>{r&&d(await i(r.id))};return(0,n.jsx)(c.Provider,{value:{user:r,profile:u,loading:p,signIn:m,signUp:g,signOut:w,refreshProfile:j},children:t})}function u(){let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1775:function(e,t,r){r.d(t,{Y:function(){return d}});var n=r(4599),o=r(2074),a=r.n(o);r(8613);var s=r(2601);async function i(e){try{let t=s.env.OPENROUTER_API_KEY||s.env.NEXT_PUBLIC_OPENROUTER_API_KEY,r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t),"HTTP-Referer":"https://optimuscode.io"},body:JSON.stringify({model:"anthropic/claude-3-opus",messages:[{role:"system",content:'You are an expert web developer who helps name projects based on their descriptions. Generate a simple, memorable name for this project based on the prompt. Return ONLY the name, nothing else. The name should be short (1-2 words), catchy, and lowercase with hyphen if multiple words. Do not add any prefixes or suffixes like "app" or "io". Example: "task-flow" or "recipemaster"'},{role:"user",content:"Generate a project name for this app: ".concat(e)}],max_tokens:50})});if(!r.ok)throw Error("AI API Error: ".concat(r.status));return(await r.json()).choices[0].message.content.trim().replace(/"/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")||"new-project-"+Date.now().toString().slice(-6)}catch(e){return console.error("Error generating project name:",e),"new-project-"+Date.now().toString().slice(-6)}}async function c(e){try{let t=s.env.OPENROUTER_API_KEY||s.env.NEXT_PUBLIC_OPENROUTER_API_KEY,r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t),"HTTP-Referer":"https://optimuscode.io"},body:JSON.stringify({model:"anthropic/claude-3-opus",messages:[{role:"system",content:'You are an expert full-stack developer. Given a prompt describing an app, generate project details including name, description, tech stack, and file structure. Return ONLY valid JSON in this format:\n            {\n              "name": "project-name",\n              "description": "Brief description of the app based on the prompt",\n              "techStack": {\n                "frontend": "React, TypeScript, Tailwind CSS",\n                "backend": "Node.js, Express",\n                "database": "MongoDB",\n                "deployment": "Vercel, MongoDB Atlas"\n              },\n              "files": ["app.js", "index.html", "styles.css"],\n              "structure": [\n                "\uD83D\uDCC1 my-project/",\n                "├── \uD83D\uDCC1 public/",\n                "│   ├── \uD83D\uDCC4 favicon.ico",\n                "│   └── \uD83D\uDCC4 robots.txt",\n                "├── \uD83D\uDCC1 src/",\n                "│   ├── \uD83D\uDCC1 components/",\n                "│   │   └── \uD83D\uDCC4 Component.jsx",\n                "│   ├── \uD83D\uDCC1 pages/",\n                "│   │   └── \uD83D\uDCC4 Home.jsx",\n                "│   └── \uD83D\uDCC4 App.jsx",\n                "├── \uD83D\uDCC4 package.json",\n                "└── \uD83D\uDCC4 README.md"\n              ]\n            }\n            \n            Ensure the structure follows modern best practices for the selected tech stack. Don\'t add comments or explanations, just the JSON object.'},{role:"user",content:"Generate project details for this app: ".concat(e)}],max_tokens:2e3})});if(!r.ok)throw Error("AI API Error: ".concat(r.status));let n=(await r.json()).choices[0].message.content.trim().match(/\{[\s\S]*\}/);if(!n)throw Error("Invalid response format");return JSON.parse(n[0])}catch(r){console.error("Error generating project details:",r);let t="new-project-"+Date.now().toString().slice(-6);return{name:t,description:e,techStack:{frontend:"React, TypeScript, Tailwind CSS",backend:"Node.js, Express",database:"MongoDB",deployment:"Vercel"},files:[],structure:["\uD83D\uDCC1 ".concat(t,"/"),"├── \uD83D\uDCC1 public/","│   ├── \uD83D\uDCC4 favicon.ico","│   └── \uD83D\uDCC4 index.html","├── \uD83D\uDCC1 src/","│   ├── \uD83D\uDCC1 components/","│   │   └── \uD83D\uDCC4 App.jsx","│   └── \uD83D\uDCC4 index.js","├── \uD83D\uDCC4 package.json","└── \uD83D\uDCC4 README.md"]}}}async function l(e,t){try{let r=s.env.OPENROUTER_API_KEY||s.env.NEXT_PUBLIC_OPENROUTER_API_KEY,n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r),"HTTP-Referer":"https://optimuscode.io"},body:JSON.stringify({model:"anthropic/claude-3-opus",messages:[{role:"system",content:'You are an expert full-stack developer. Generate file contents for a web application based on the provided project structure. Return ONLY valid JSON as an array of objects with \'path\' and \'content\' properties for each file:\n            [\n              {\n                "path": "src/App.jsx",\n                "content": "// Full content of the file here..."\n              },\n              {\n                "path": "src/index.js",\n                "content": "// Full content of the file here..."\n              }\n            ]\n            \n            Follow these guidelines:\n            1. Generate content for key files only (max 10 files)\n            2. Include package.json with actual dependencies\n            3. Provide a detailed README.md\n            4. For code files, include imports, component structure, and basic functionality\n            5. Keep code clean, modern, and following best practices\n            6. Don\'t include any explanations outside the JSON structure\n            7. Don\'t include file content in comments within the JSON\n            8. Keep each file under 300 lines of code\n            9. Use modern syntax (ES6+, hooks for React, etc.)\n            10. Include basic error handling and responsive design\n            \n            Return ONLY the JSON array containing file objects.'},{role:"user",content:"Generate file contents for this project:\n            \n            Project name: ".concat(t.name,"\n            Project description: ").concat(t.description,"\n            Tech stack:\n            - Frontend: ").concat(t.techStack.frontend,"\n            - Backend: ").concat(t.techStack.backend,"\n            - Database: ").concat(t.techStack.database,"\n            \n            Project structure:\n            ").concat(t.structure.join("\n"),"\n            \n            Original prompt: ").concat(e)}],max_tokens:4e3})});if(!n.ok)throw Error("AI API Error: ".concat(n.status));let o=(await n.json()).choices[0].message.content.trim().match(/\[[\s\S]*\]/);if(!o)throw Error("Invalid response format");return JSON.parse(o[0])}catch(e){return console.error("Error generating file contents:",e),[{path:"README.md",content:"# ".concat(t.name,"\n\nThis project was generated with OptimusCode.io\n\n## Description\n\n").concat(t.description,"\n\n## Getting Started\n\n```bash\n# Install dependencies\nnpm install\n\n# Run the development server\nnpm run dev\n```")},{path:"package.json",content:'{\n  "name": "'.concat(t.name,'",\n  "version": "0.1.0",\n  "private": true,\n  "dependencies": {\n    "react": "^18.2.0",\n    "react-dom": "^18.2.0"\n  },\n  "scripts": {\n    "dev": "vite",\n    "build": "vite build",\n    "start": "vite preview"\n  }\n}')}]}}async function u(e,t){let r=new(a());return t.find(e=>"README.md"===e.path)||r.file("".concat(e,"/README.md"),"# ".concat(e,"\n\nThis project was generated with OptimusCode.io\n\n## Getting Started\n\n1. Install dependencies: `npm install`\n2. Start the development server: `npm run dev`\n\n## Features\n\n- Modern, responsive UI\n- API endpoints\n- Database integration")),t.find(e=>".env.example"===e.path)||r.file("".concat(e,"/.env.example"),"# Database Connection\nDATABASE_URL=your_database_url_here\n\n# Authentication\nAUTH_SECRET=your_auth_secret_here\n\n# API Keys\nAPI_KEY=your_api_key_here"),t.forEach(t=>{r.file("".concat(e,"/").concat(t.path),t.content)}),r.generateAsync({type:"blob"})}class d{async createProject(e,t){try{let r=await i(t),{data:o,error:a}=await n.O.from("projects").insert([{user_id:e,name:r,description:t,prompt:t,status:"pending",tech_stack:{}}]).select().single();if(a)throw a;return this.generateFullProject(o.id,t),o}catch(e){return console.error("Error creating project:",e),null}}async generateFullProject(e,t){try{await n.O.from("projects").update({status:"generating"}).eq("id",e);let r=await c(t);await n.O.from("projects").update({name:r.name,description:r.description,tech_stack:r.techStack,structure:r.structure}).eq("id",e);let o=await l(t,r),a=await u(r.name,o),s=Date.now(),i="project-zips/".concat(e,"/").concat(s,"-").concat(r.name.toLowerCase().replace(/\s+/g,"-"),".zip"),{error:d}=await n.O.storage.from("project-files").upload(i,a,{contentType:"application/zip",upsert:!0});if(d)throw d;let{data:p}=n.O.storage.from("project-files").getPublicUrl(i);await n.O.from("projects").update({status:"completed",download_url:p.publicUrl,files:o.map(e=>e.path)}).eq("id",e)}catch(t){console.error("Error generating full project:",t),await n.O.from("projects").update({status:"failed"}).eq("id",e)}}async getUserProjects(){try{let{data:e}=await n.O.auth.getSession();if(!e.session)throw Error("Authentication required");let t=e.session.user.id,{data:r,error:o}=await n.O.from("projects").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(o)throw o;return r||[]}catch(e){return console.error("Error fetching projects:",e),[]}}static async getProjectsByUserId(e){try{let{data:t,error:r}=await n.O.from("projects").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(e){return console.error("Error fetching projects by user ID:",e),[]}}async getProjectById(e){try{let{data:t,error:r}=await n.O.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}catch(e){return console.error("Error fetching project:",e),null}}async downloadProject(e){try{let t=await this.getProjectById(e);if(!t||!t.download_url)throw Error("Project or download URL not found");return window.open(t.download_url,"_blank"),!0}catch(e){return console.error("Error downloading project:",e),!1}}async deleteProject(e){try{let t="project-zips/".concat(e),{data:r}=await n.O.storage.from("project-files").list(t);if(r&&r.length>0){let e=r.map(e=>"".concat(t,"/").concat(e.name));await n.O.storage.from("project-files").remove(e)}let{error:o}=await n.O.from("projects").delete().eq("id",e);if(o)throw o;return!0}catch(e){return console.error("Error deleting project:",e),!1}}async regenerateProject(e){try{let t=await this.getProjectById(e);if(!t)throw Error("Project not found");return await n.O.from("projects").update({status:"generating"}).eq("id",e),this.generateFullProject(e,t.prompt),!0}catch(e){return console.error("Error regenerating project:",e),!1}}async getProjectFiles(e){try{var t;let r=await this.getProjectById(e);if(!r)throw Error("Project not found");if("completed"!==r.status)return[];return t={name:r.name,description:r.description,techStack:r.tech_stack,files:r.files||[],structure:r.structure||[]},[{path:"index.html",content:'<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>'.concat(t.name,'</title>\n  <link rel="stylesheet" href="/styles.css">\n</head>\n<body>\n  <div id="root"></div>\n  <script type="module" src="/src/index.js"></script>\n</body>\n</html>')},{path:"src/index.js",content:"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './components/App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"},{path:"package.json",content:'{\n  "name": "'.concat(t.name,'",\n  "version": "0.1.0",\n  "private": true,\n  "dependencies": {\n    "react": "^18.2.0",\n    "react-dom": "^18.2.0"\n  },\n  "scripts": {\n    "dev": "vite",\n    "build": "vite build",\n    "start": "vite preview"\n  }\n}')}]}catch(e){return console.error("Error getting project files:",e),[]}}async incrementUserGenerationCount(e){try{let{error:t}=await n.O.rpc("increment_generation_count",{user_id:e});if(t)throw t;return!0}catch(e){return console.error("Error incrementing generation count:",e),!1}}}},4599:function(e,t,r){r.d(t,{O:function(){return n}});let n=(0,r(4756).eI)("https://cfovctpyutyvyqzvypwx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmb3ZjdHB5dXR5dnlxenZ5cHd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MTk0MDIsImV4cCI6MjA2MDQ5NTQwMn0.J-c-JGblGgP4zi5ceTORCq8MYbdfcbtP-Ml8a8s4oRM")},1657:function(e,t,r){r.d(t,{cn:function(){return a}});var n=r(7042),o=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,n.W)(t))}}}]);