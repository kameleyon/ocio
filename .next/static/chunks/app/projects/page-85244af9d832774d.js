(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{7887:function(e,t,a){Promise.resolve().then(a.bind(a,6347))},6347:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var s=a(7437),l=a(2265),r=a(4033),n=a(4280),o=a(1981),i=a(1827),d=a(9479),c=a(2338),m=a(3673),x=a(2455),h=a(5628),u=a(6141),f=a(5817),p=a(1138);a(4599);var g=a(1775),j=a(5754),b=a(7815),N=a(5871),y=a(5179),w=a(8631),v=a(7158),k=a(2442),B=a(6369),S=a(1657);let C=w.fC,_=w.xz;w.ZA,w.Uv,w.Tr,w.Ee,l.forwardRef((e,t)=>{let{className:a,inset:l,children:r,...n}=e;return(0,s.jsxs)(w.fF,{ref:t,className:(0,S.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-slate-800/50 data-[state=open]:bg-slate-800/50",l&&"pl-8",a),...n,children:[r,(0,s.jsx)(v.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=w.fF.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(w.tu,{ref:t,className:(0,S.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slateBlue/30 bg-berkeleyBlue/90 p-1 text-whiteSmoke shadow-lg backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=w.tu.displayName;let Z=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,s.jsx)(w.Uv,{children:(0,s.jsx)(w.VY,{ref:t,sideOffset:l,className:(0,S.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border border-slateBlue/30 bg-berkeleyBlue/90 p-1 text-whiteSmoke shadow-lg backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});Z.displayName=w.VY.displayName;let G=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(w.ck,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-slate-800/50 focus:text-whiteSmoke data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...r})});G.displayName=w.ck.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:r,...n}=e;return(0,s.jsxs)(w.oC,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/50 focus:text-whiteSmoke data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(w.wU,{children:(0,s.jsx)(k.Z,{className:"h-4 w-4"})})}),l]})}).displayName=w.oC.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(w.Rk,{ref:t,className:(0,S.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-slate-800/50 focus:text-whiteSmoke data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(w.wU,{children:(0,s.jsx)(B.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=w.Rk.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(w.__,{ref:t,className:(0,S.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...r})}).displayName=w.__.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(w.Z0,{ref:t,className:(0,S.cn)("my-1 h-px bg-slateBlue/30",a),...l})}).displayName=w.Z0.displayName;var z=a(5943);let R=z.fC;z.xz;let D=z.h_,E=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(z.aV,{className:(0,S.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});E.displayName=z.aV.displayName;let F=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)(D,{children:[(0,s.jsx)(E,{}),(0,s.jsx)(z.VY,{ref:t,className:(0,S.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slateBlue/30 bg-berkeleyBlue/90 p-6 shadow-lg backdrop-blur-md duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});F.displayName=z.VY.displayName;let P=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,S.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};P.displayName="AlertDialogHeader";let T=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,S.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};T.displayName="AlertDialogFooter";let U=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(z.Dx,{ref:t,className:(0,S.cn)("text-lg font-semibold text-whiteSmoke",a),...l})});U.displayName=z.Dx.displayName;let A=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(z.dk,{ref:t,className:(0,S.cn)("text-sm text-lightGray",a),...l})});A.displayName=z.dk.displayName;let Y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(z.aU,{ref:t,className:(0,S.cn)("inline-flex h-10 items-center justify-center rounded-md bg-gradient-to-r from-slateBlue to-robinEggBlue px-4 py-2 text-sm font-medium text-whiteSmoke shadow-glow transition-colors hover:from-slateBlue/90 hover:to-robinEggBlue/90 focus:outline-none focus:ring-2 focus:ring-robinEggBlue focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",a),...l})});Y.displayName=z.aU.displayName;let V=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(z.$j,{ref:t,className:(0,S.cn)("mt-2 inline-flex h-10 items-center justify-center rounded-md border border-slateBlue/50 bg-transparent px-4 py-2 text-sm font-medium text-lightGray ring-offset-background transition-colors hover:bg-slate-800/10 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 sm:mt-0",a),...l})});V.displayName=z.$j.displayName;var L=a(5072),O=a(8258);function I(){let e=(0,r.useRouter)(),{user:t,loading:a}=(0,O.useAuth)(),[w,v]=(0,l.useState)([]),[k,B]=(0,l.useState)(!0),[S,z]=(0,l.useState)(null),[D,E]=(0,l.useState)(""),[I,H]=(0,l.useState)("created_at"),[W,$]=(0,l.useState)("desc"),[q,J]=(0,l.useState)(null),[K,M]=(0,l.useState)(!1),Q=new g.Y;(0,l.useEffect)(()=>{a||(t?X():e.push("/login"))},[a,t,e]);let X=async()=>{try{B(!0);let e=await Q.getUserProjects();v(e)}catch(e){z("Failed to load projects. Please try again later."),console.error("Error fetching projects:",e)}finally{B(!1)}},ee=async e=>{try{await Q.downloadProject(e)}catch(e){console.error("Error downloading project:",e)}},et=async t=>{try{await Q.regenerateProject(t),e.push("/build?projectId=".concat(t))}catch(e){console.error("Error regenerating project:",e)}},ea=async()=>{if(q)try{if(M(!0),await Q.deleteProject(q))v(w.filter(e=>e.id!==q));else throw Error("Failed to delete project")}catch(e){console.error("Error deleting project:",e),z("Failed to delete project. Please try again later.")}finally{M(!1),J(null)}},es=e=>{I===e?$("asc"===W?"desc":"asc"):(H(e),$("created_at"===e?"desc":"asc"))},el=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)},er=w.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.description.toLowerCase().includes(D.toLowerCase())).sort((e,t)=>"name"===I?"asc"===W?e.name.localeCompare(t.name):t.name.localeCompare(e.name):"status"===I?"asc"===W?e.status.localeCompare(t.status):t.status.localeCompare(e.status):"asc"===W?new Date(e.created_at).getTime()-new Date(t.created_at).getTime():new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),en=Array.from(new Set(w.filter(e=>e.tech_stack&&e.tech_stack.frontend).map(e=>e.tech_stack.frontend)));return a?(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-richBlack",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-4 animate-spin",children:(0,s.jsx)(n.Z,{className:"h-8 w-8 text-robinEggBlue"})}),(0,s.jsx)("p",{className:"text-lightGray",children:"Loading..."})]})}):k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L.Z,{}),(0,s.jsx)(N.W,{className:"flex min-h-screen items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-4 animate-spin",children:(0,s.jsx)(n.Z,{className:"h-8 w-8 text-slateBlue"})}),(0,s.jsx)("p",{className:"text-lg text-lightGray",children:"Loading your projects..."})]})})]}):(0,s.jsxs)("main",{className:"flex min-h-screen flex-col bg-richBlack",children:[(0,s.jsx)(L.Z,{}),(0,s.jsxs)(N.W,{className:"py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"mb-2 font-comfortaa text-3xl font-bold text-whiteSmoke",children:"Your Projects"}),(0,s.jsx)("p",{className:"text-lightGray",children:"View, download, and regenerate your previously created applications."})]}),S&&(0,s.jsxs)("div",{className:"mb-6 rounded-lg bg-red-500/10 p-4 text-red-400 flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"h-5 w-5"}),(0,s.jsx)("p",{children:S})]}),(0,s.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,s.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-lightGray"}),(0,s.jsx)(y.I,{type:"text",placeholder:"Search projects...",className:"pl-10 bg-berkeleyBlue border-slateBlue/30 text-whiteSmoke",value:D,onChange:e=>E(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{asChild:!0,children:(0,s.jsxs)(j.z,{variant:"outline",className:"border-slateBlue/30 text-lightGray hover:text-whiteSmoke flex items-center gap-1.5",children:["asc"===W?(0,s.jsx)(d.Z,{className:"h-4 w-4"}):(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Sort by: ","created_at"===I?"Date":"name"===I?"Name":"Status"]})}),(0,s.jsxs)(Z,{className:"bg-berkeleyBlue border-slateBlue/30",children:[(0,s.jsx)(G,{onClick:()=>es("name"),className:"text-lightGray hover:text-whiteSmoke",children:"Name"}),(0,s.jsx)(G,{onClick:()=>es("created_at"),className:"text-lightGray hover:text-whiteSmoke",children:"Date Created"}),(0,s.jsx)(G,{onClick:()=>es("status"),className:"text-lightGray hover:text-whiteSmoke",children:"Status"})]})]}),en.length>0&&(0,s.jsxs)(C,{children:[(0,s.jsx)(_,{asChild:!0,children:(0,s.jsxs)(j.z,{variant:"outline",className:"border-slateBlue/30 text-lightGray hover:text-whiteSmoke flex items-center gap-1.5",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),"Tech Stack"]})}),(0,s.jsxs)(Z,{className:"bg-berkeleyBlue border-slateBlue/30",children:[(0,s.jsx)(G,{onClick:()=>E(""),className:"text-lightGray hover:text-whiteSmoke",children:"All"}),en.map(e=>(0,s.jsx)(G,{onClick:()=>E(e),className:"text-lightGray hover:text-whiteSmoke",children:e},e))]})]}),(0,s.jsxs)(j.z,{variant:"default",className:"bg-slateBlue hover:bg-slateBlue/90 text-whiteSmoke",onClick:()=>e.push("/build"),children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-1.5"}),"New Project"]})]})]}),0===er.length?(0,s.jsxs)("div",{className:"rounded-xl border border-slateBlue/20 bg-berkeleyBlue p-8 text-center",children:[(0,s.jsx)(h.Z,{className:"mx-auto mb-4 h-12 w-12 text-lightGray"}),(0,s.jsx)("h2",{className:"mb-2 font-comfortaa text-xl font-semibold text-whiteSmoke",children:D?"No projects match your search":"No projects yet"}),(0,s.jsx)("p",{className:"mb-6 text-lightGray",children:D?"Try adjusting your search terms or clear the search to see all projects.":"You haven't created any projects yet. Head over to the build page to get started."}),D?(0,s.jsx)(j.z,{variant:"outline",className:"border-slateBlue/30 text-lightGray hover:text-whiteSmoke",onClick:()=>E(""),children:"Clear Search"}):(0,s.jsx)(j.z,{onClick:()=>e.push("/build"),className:"bg-slateBlue hover:bg-slateBlue/90 text-whiteSmoke",children:"Create Your First Project"})]}):(0,s.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:er.map(e=>(0,s.jsxs)(b.Zb,{className:"flex flex-col overflow-hidden bg-berkeleyBlue border-slateBlue/20 hover:border-slateBlue/40 transition-all hover:shadow-md",children:[(0,s.jsxs)("div",{className:"flex-1 p-6",children:[(0,s.jsx)("h3",{className:"mb-2 font-comfortaa text-xl font-semibold text-whiteSmoke",children:e.name}),(0,s.jsxs)("div",{className:"mb-3 flex items-center text-sm text-lightGray",children:[(0,s.jsx)(u.Z,{className:"mr-1.5 h-4 w-4"}),(0,s.jsx)("span",{children:el(e.created_at)})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat("completed"===e.status?"bg-green-500/10 text-green-400":"failed"===e.status?"bg-red-500/10 text-red-400":"bg-yellow-500/10 text-yellow-400"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsx)("p",{className:"text-sm text-lightGray line-clamp-2 mb-3",children:e.description}),e.tech_stack&&e.tech_stack.frontend&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-slateBlue/20 px-2 py-0.5 text-xs text-robinEggBlue",children:e.tech_stack.frontend}),e.tech_stack.backend&&(0,s.jsx)("span",{className:"inline-flex items-center rounded-full bg-slateBlue/20 px-2 py-0.5 text-xs text-robinEggBlue",children:e.tech_stack.backend})]})]}),(0,s.jsxs)("div",{className:"flex border-t border-slateBlue/20",children:[(0,s.jsxs)(j.z,{variant:"ghost",className:"flex-1 rounded-none py-4 text-lightGray hover:text-whiteSmoke hover:bg-slateBlue/10",onClick:()=>ee(e.id),disabled:"completed"!==e.status,children:[(0,s.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Download"]}),(0,s.jsx)("div",{className:"w-px bg-slateBlue/20"}),(0,s.jsxs)(j.z,{variant:"ghost",className:"flex-1 rounded-none py-4 text-lightGray hover:text-whiteSmoke hover:bg-slateBlue/10",onClick:()=>et(e.id),children:[(0,s.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Regenerate"]}),(0,s.jsx)("div",{className:"w-px bg-slateBlue/20"}),(0,s.jsx)(j.z,{variant:"ghost",className:"aspect-square rounded-none py-4 text-red-400 hover:text-red-300 hover:bg-red-500/10",onClick:()=>J(e.id),children:(0,s.jsx)(p.Z,{className:"h-4 w-4"})})]})]},e.id))})]}),(0,s.jsx)(R,{open:!!q,onOpenChange:e=>!e&&J(null),children:(0,s.jsxs)(F,{className:"bg-berkeleyBlue border-slateBlue/30",children:[(0,s.jsxs)(P,{children:[(0,s.jsx)(U,{className:"text-whiteSmoke",children:"Delete Project"}),(0,s.jsx)(A,{className:"text-lightGray",children:"Are you sure you want to delete this project? This action cannot be undone and all associated files will be permanently removed."})]}),(0,s.jsxs)(T,{children:[(0,s.jsx)(V,{className:"bg-transparent border-slateBlue/30 text-lightGray hover:text-whiteSmoke hover:bg-slateBlue/20",disabled:K,children:"Cancel"}),(0,s.jsx)(Y,{className:"bg-red-500 hover:bg-red-600 text-white",onClick:ea,disabled:K,children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Deleting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})})]})}}},function(e){e.O(0,[887,574,657,13,269,971,938,744],function(){return e(e.s=7887)}),_N_E=e.O()}]);