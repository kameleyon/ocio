(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9614:function(e,t,r){Promise.resolve().then(r.bind(r,7965)),Promise.resolve().then(r.bind(r,8333)),Promise.resolve().then(r.t.bind(r,6970,23)),Promise.resolve().then(r.t.bind(r,3415,23)),Promise.resolve().then(r.t.bind(r,2445,23)),Promise.resolve().then(r.t.bind(r,347,23))},7965:function(e,t,r){"use strict";r.r(t),r.d(t,{ParticleBackground:function(){return o}});var n=r(7437),i=r(2265);function o(){let e=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let t=e.current;if(!t)return;let r=t.getContext("2d");if(!r)return;let n=()=>{t.width=window.innerWidth,t.height=window.innerHeight};n(),window.addEventListener("resize",n);let i=["#7357C6","#3DD6D1"],o=[];for(let e=0;e<100;e++)a();function a(){let e=2*Math.random()+1;o.push({x:Math.random()*t.width,y:t.height+e,size:e,color:i[Math.floor(Math.random()*i.length)],speed:1*Math.random()+.2,opacity:0,life:0,maxLife:1e3*Math.random()+3e3})}let l=requestAnimationFrame(function e(){r.clearRect(0,0,t.width,t.height);for(let e=0;e<o.length;e++){let t=o[e];t.life+=16,t.life<500?t.opacity=Math.min(t.life/500,.7):t.life>t.maxLife-500&&(t.opacity=.7*Math.max((t.maxLife-t.life)/500,0)),t.y-=t.speed,r.beginPath(),r.arc(t.x,t.y,t.size,0,2*Math.PI),r.fillStyle=t.color,r.globalAlpha=t.opacity,r.fill(),r.globalAlpha=1,t.life>=t.maxLife&&(a(),o.splice(e,1),e--)}requestAnimationFrame(e)});return()=>{window.removeEventListener("resize",n),cancelAnimationFrame(l)}},[]),(0,n.jsx)("canvas",{ref:e,className:"fixed inset-0 w-full h-full -z-10 pointer-events-none"})}},8333:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return u},useAuth:function(){return c}});var n=r(7437),i=r(2265),o=r(4599),a=r(4033),l=r(8993);let s=(0,i.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,i.useState)(null),[c,f]=(0,i.useState)(null),[d,h]=(0,i.useState)(!0),m=(0,a.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await o.O.auth.getSession();if(null==e?void 0:e.user){u(e.user);let t=await (0,l.Ai)(e.user.id);f(t)}}catch(e){console.error("Error checking session:",e)}finally{h(!1)}})();let{data:e}=o.O.auth.onAuthStateChange(async(e,t)=>{(null==t?void 0:t.user)?(u(t.user),f(await (0,l.Ai)(t.user.id))):(u(null),f(null)),h(!1)});return()=>{e.subscription.unsubscribe()}},[]);let _=async(e,t)=>{try{let{data:r,error:n}=await o.O.auth.signInWithPassword({email:e,password:t});if(n)throw n;if(r.user){u(r.user);let e=await (0,l.Ai)(r.user.id);f(e),m.push("/build")}return{error:null}}catch(e){return console.error("Error signing in:",e),{error:e}}},p=async(e,t)=>{try{let{data:r,error:n}=await o.O.auth.signUp({email:e,password:t,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback"),data:{full_name:"",avatar_url:""}}});if(n)throw n;return r.user&&m.push("/login?message=verification-email-sent"),{error:null}}catch(e){return console.error("Error signing up:",e),{error:e}}},y=async()=>{try{await o.O.auth.signOut(),window.location.href="/"}catch(e){console.error("Error signing out:",e)}},w=async()=>{r&&f(await (0,l.Ai)(r.id))};return(0,n.jsx)(s.Provider,{value:{user:r,profile:c,loading:d,signIn:_,signUp:p,signOut:y,refreshProfile:w},children:t})}function c(){let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8993:function(e,t,r){"use strict";r.d(t,{Ai:function(){return i},ck:function(){return o}});var n=r(4599);async function i(e){try{let{data:r,error:i}=await n.O.from("profiles").select("*").eq("id",e).maybeSingle();if(i&&"PGRST116"!==i.code)throw i;if(!r&&e){var t;let r=await n.O.auth.getUser();if(null===(t=r.data)||void 0===t?void 0:t.user){let t=r.data.user.email||"",{data:i,error:o}=await n.O.from("profiles").insert({id:e,email:t,full_name:null,avatar_url:null,subscription_tier:"free",generation_count:0}).select().single();if(o)throw o;return i}}return r}catch(e){return console.error("Error in getProfile:",e),null}}async function o(e,t){try{let{data:r,error:i}=await n.O.from("profiles").update(t).eq("id",e).select().single();if(i)throw i;return{profile:r,error:null}}catch(e){return console.error("Error in updateProfile:",e),{profile:null,error:e}}}},4599:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});let n=(0,r(6502).AY)("https://cfovctpyutyvyqzvypwx.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNmb3ZjdHB5dXR5dnlxenZ5cHd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MTk0MDIsImV4cCI6MjA2MDQ5NTQwMn0.J-c-JGblGgP4zi5ceTORCq8MYbdfcbtP-Ml8a8s4oRM")},347:function(){},2445:function(){},6970:function(e){e.exports={style:{fontFamily:"'__Comfortaa_db952b', '__Comfortaa_Fallback_db952b'",fontStyle:"normal"},className:"__className_db952b",variable:"__variable_db952b"}},3415:function(e){e.exports={style:{fontFamily:"'__Questrial_8683ac', '__Questrial_Fallback_8683ac'",fontWeight:400,fontStyle:"normal"},className:"__className_8683ac",variable:"__variable_8683ac"}},622:function(e,t,r){"use strict";var n=r(2265),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,n)&&!s.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:l.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},7437:function(e,t,r){"use strict";e.exports=r(622)}},function(e){e.O(0,[711,971,938,744],function(){return e(e.s=9614)}),_N_E=e.O()}]);